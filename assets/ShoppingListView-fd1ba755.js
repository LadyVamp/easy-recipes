import{c as U,G as E,H as T,a as z,h as D,b as O,I as F,J,K as M,L as R,P as g,M as W,N as G,d as H,O as X,r as d,m as f,n as m,p,x as r,t as v,R as C,S as Y,U as Z,z as j,F as _,q as V,y as u,V as ee,B as L,W as q,X as oe,Y as te,k as le}from"./index-98011464.js";import{Q as x,b as ae,a as I}from"./QCard-fd2f4c5e.js";const se=U({name:"QCardActions",props:{...E,vertical:Boolean},setup(e,{slots:o}){const t=T(e),l=z(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>D("div",{class:l.value},O(o.default))}});function $(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const B=F({name:"close-popup",beforeMount(e,{value:o}){const t={depth:$(o),handler(l){t.depth!==0&&setTimeout(()=>{const a=J(e);a!==void 0&&M(a,l,t.depth)})},handlerKey(l){R(l,13)===!0&&t.handler(l)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=$(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});function ne(e){const o=Object.assign({noopener:!0},e),t=[];for(const l in o){const a=o[l];a===!0?t.push(l):(G(a)||typeof a=="string"&&a!=="")&&t.push(l+"="+a)}return t.join(",")}function P(e,o,t){let l=window.open;if(g.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)l=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const a=l(e,"_blank",ne(t));if(a)return g.is.desktop&&a.focus(),a;o&&o()}const re=(e,o,t)=>{if(g.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(l=>{l?window.SafariViewController.show({url:e},W,o):P(e,o,t)});return}return P(e,o,t)},ie=e=>(oe("data-v-20f1caf5"),e=e(),te(),e),ue={class:"q-pa-md"},pe={class:"row"},ce={class:"col col-6"},de={class:"col col-6"},ve=["href"],fe=["href"],me=ie(()=>p("div",{class:"text-h6"},"Добавление продукта",-1)),he=H({__name:"ShoppingListView",setup(e){const{selectedShop1:o}=X(),t=d(""),l=d(!1),a=d(""),c=d(JSON.parse(localStorage.getItem("shoppingList")||"[]")||[]),A=d([{value:"multisearch",label:"Все магазины"},{value:"auchan",label:"Ашан"},{value:"lentagp",label:"Лента"},{value:"globusgiper",label:"Глобус"},{value:"okey",label:"Окей"},{value:"perekrestok",label:"Перекресток"},{value:"perekrestokvprok",label:"Перекресток Впрок"},{value:"metro",label:"Metro"},{value:"vkusvill_darkstore",label:"Вкусвилл"}]),N=d(["Яблоки","Груши","Йогурт греческий","Йогурт термостатный","Вода 5 л","Яйцо куриное СО","Хлеб зерновой"]);function k(i){return o.value.value==="multisearch"?`https://kuper.ru/multisearch?q=${i.trim()}`:`https://kuper.ru/${o.value.value}/search?keywords=${i.trim()}&sort=unit_price_asc`}function Q(){return o.value.value==="multisearch"?`https://kuper.ru/multisearch?q=${t.value.trim()}`:`https://kuper.ru/${o.value.value}/search?keywords=${t.value.trim()}&sort=unit_price_asc`}function y(){re(Q())}function S(){a.value=a.value.trim(),a.value.length>0&&(c.value.push(a.value),localStorage.setItem("shoppingList",JSON.stringify(c.value)))}function K(i){c.value=c.value.filter(n=>n!==i),localStorage.setItem("shoppingList",JSON.stringify(c.value))}function w(i){navigator.clipboard.writeText(i)}return(i,n)=>(f(),m(_,null,[p("div",ue,[p("div",pe,[p("div",ce,[r(x,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value=s),filled:"",type:"search",hint:"Поиск в магазине",onKeyup:C(y,["enter"])},{append:v(()=>[r(u,{color:"secondary","icon-right":"search",disable:t.value==="",onClick:y},null,8,["disable"])]),_:1},8,["modelValue"]),r(j,{modelValue:Y(o),"onUpdate:modelValue":n[1]||(n[1]=s=>Z(o)?o.value=s:null),options:A.value,label:"Магазин",class:"q-select"},null,8,["modelValue","options"])]),p("div",de,[(f(!0),m(_,null,V(N.value,(s,h)=>(f(),m("ul",{key:h,class:"q-pl-md"},[p("a",{href:k(s),target:"_blank"},L(s),9,ve),r(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:b=>w(s)},null,8,["onClick"])]))),128)),r(u,{icon:"mdi-plus",color:"primary",class:"q-ml-md",onClick:n[2]||(n[2]=s=>l.value=!0)}),(f(!0),m(_,null,V(c.value,(s,h)=>(f(),m("ul",{key:h,class:"q-pl-md"},[p("a",{href:k(s),target:"_blank"},L(s),9,fe),r(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:b=>w(s)},null,8,["onClick"]),r(u,{flat:"",round:"",color:"orange-5",icon:"mdi-minus",size:"sm",class:"border-gray",onClick:b=>K(s)},null,8,["onClick"])]))),128))])])]),r(ee,{modelValue:l.value,"onUpdate:modelValue":n[5]||(n[5]=s=>l.value=s),persistent:"",onBeforeShow:n[6]||(n[6]=s=>a.value="")},{default:v(()=>[r(ae,{style:{"min-width":"350px"}},{default:v(()=>[r(I,null,{default:v(()=>[me]),_:1}),r(I,{class:"q-pt-none"},{default:v(()=>[r(x,{modelValue:a.value,"onUpdate:modelValue":n[3]||(n[3]=s=>a.value=s),dense:"",autofocus:"",onKeyup:n[4]||(n[4]=C(s=>{S(),l.value=!1},["enter"]))},null,8,["modelValue"])]),_:1}),r(se,{align:"right",class:"text-primary"},{default:v(()=>[q(r(u,{flat:"",label:"Отмена"},null,512),[[B]]),q(r(u,{color:"primary",label:"Добавить",onClick:S},null,512),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ke=le(he,[["__scopeId","data-v-20f1caf5"]]);export{ke as default};
