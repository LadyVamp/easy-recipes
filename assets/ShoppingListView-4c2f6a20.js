import{c as Q,G as K,H as U,a as E,h as D,b as O,I as F,J,K as T,L as M,P as g,M as R,N as z,d as W,O as G,r as p,m as v,n as f,p as i,x as n,t as d,R as y,S as H,U as X,z as Y,F as _,q as b,y as m,V as Z,B as w,W as V,X as j,Y as ee,k as oe}from"./index-12403e8f.js";import{Q as L,b as te,a as C}from"./QCard-de4cdc24.js";const ae=Q({name:"QCardActions",props:{...K,vertical:Boolean},setup(e,{slots:o}){const t=U(e),a=E(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>D("div",{class:a.value},O(o.default))}});function q(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const I=F({name:"close-popup",beforeMount(e,{value:o}){const t={depth:q(o),handler(a){t.depth!==0&&setTimeout(()=>{const s=J(e);s!==void 0&&T(s,a,t.depth)})},handlerKey(a){M(a,13)===!0&&t.handler(a)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=q(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});function se(e){const o=Object.assign({noopener:!0},e),t=[];for(const a in o){const s=o[a];s===!0?t.push(a):(z(s)||typeof s=="string"&&s!=="")&&t.push(a+"="+s)}return t.join(",")}function x(e,o,t){let a=window.open;if(g.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)a=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const s=a(e,"_blank",se(t));if(s)return g.is.desktop&&s.focus(),s;o&&o()}const le=(e,o,t)=>{if(g.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(a=>{a?window.SafariViewController.show({url:e},R,o):x(e,o,t)});return}return x(e,o,t)},re=e=>(j("data-v-b4f8d7d4"),e=e(),ee(),e),ne={class:"q-pa-md"},ie={class:"row"},ue={class:"col col-6"},pe={class:"col col-6"},de=["href"],ce=["href"],ve=re(()=>i("div",{class:"text-h6"},"Добавление продукта",-1)),fe=W({__name:"ShoppingListView",setup(e){const{selectedShop1:o}=G(),t=p(""),a=p(!1),s=p(""),u=p(JSON.parse(localStorage.getItem("shoppingList")||"[]")||[]),$=p([{value:"multisearch",label:"Все магазины"},{value:"auchan",label:"Ашан"},{value:"lentagp",label:"Лента"},{value:"globusgiper",label:"Глобус"},{value:"okey",label:"Окей"},{value:"perekrestok",label:"Перекресток"},{value:"perekrestokvprok",label:"Перекресток Впрок"},{value:"metro",label:"Metro"},{value:"vkusvill_darkstore",label:"Вкусвилл"}]),P=p(["Яблоки","Груши","Йогурт греческий","Йогурт термостатный","Вода 5 л","Яйцо куриное СО","Хлеб зерновой"]);function k(c){return o.value.value==="multisearch"?`https://kuper.ru/multisearch?q=${c.trim()}`:`https://kuper.ru/${o.value.value}/search?keywords=${c.trim()}&sort=unit_price_asc`}function B(){return o.value.value==="multisearch"?`https://kuper.ru/multisearch?q=${t.value.trim()}`:`https://kuper.ru/${o.value.value}/search?keywords=${t.value.trim()}&sort=unit_price_asc`}function S(){le(B())}function A(){u.value.push(s.value),localStorage.setItem("shoppingList",JSON.stringify(u.value))}function N(c){u.value=u.value.filter(r=>r!==c),localStorage.setItem("shoppingList",JSON.stringify(u.value))}return(c,r)=>(v(),f(_,null,[i("div",ne,[i("div",ie,[i("div",ue,[n(L,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l),filled:"",type:"search",hint:"Поиск в магазине",onKeyup:y(S,["enter"])},{append:d(()=>[n(m,{color:"secondary","icon-right":"search",disable:t.value==="",onClick:S},null,8,["disable"])]),_:1},8,["modelValue"]),n(Y,{modelValue:H(o),"onUpdate:modelValue":r[1]||(r[1]=l=>X(o)?o.value=l:null),options:$.value,label:"Магазин",class:"q-select"},null,8,["modelValue","options"])]),i("div",pe,[(v(!0),f(_,null,b(P.value,(l,h)=>(v(),f("ul",{key:h,class:"q-pl-md"},[i("a",{href:k(l),target:"_blank"},w(l),9,de)]))),128)),n(m,{icon:"mdi-plus",color:"primary",class:"q-ml-md",onClick:r[2]||(r[2]=l=>a.value=!0)}),(v(!0),f(_,null,b(u.value,(l,h)=>(v(),f("ul",{key:h,class:"q-pl-md"},[i("a",{href:k(l),target:"_blank"},w(l),9,ce),n(m,{flat:"",color:"orange-5",icon:"mdi-minus",class:"border-gray",onClick:me=>N(l)},null,8,["onClick"])]))),128))])])]),n(Z,{modelValue:a.value,"onUpdate:modelValue":r[5]||(r[5]=l=>a.value=l),persistent:"",onBeforeShow:r[6]||(r[6]=l=>s.value="")},{default:d(()=>[n(te,{style:{"min-width":"350px"}},{default:d(()=>[n(C,null,{default:d(()=>[ve]),_:1}),n(C,{class:"q-pt-none"},{default:d(()=>[n(L,{modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=l=>s.value=l),dense:"",autofocus:"",onKeyup:r[4]||(r[4]=y(l=>a.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),n(ae,{align:"right",class:"text-primary"},{default:d(()=>[V(n(m,{flat:"",label:"Отмена"},null,512),[[I]]),V(n(m,{color:"primary",label:"Добавить",onClick:A},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ge=oe(fe,[["__scopeId","data-v-b4f8d7d4"]]);export{ge as default};
