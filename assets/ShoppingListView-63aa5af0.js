import{c as z,G as F,H as J,a as R,h as M,b as W,I as G,J as H,K as X,L as Y,P as w,M as Z,N as j,d as ee,O as oe,r as v,m as f,n as h,p as d,x as a,t as r,R as x,S as te,U as le,V as ne,F as S,q as I,y as u,W as B,B as P,X as g,Y as ae,Z as se,k as ie}from"./index-2f1cddfa.js";import{Q as $,b as A,a as k}from"./QCard-e252a959.js";const N=z({name:"QCardActions",props:{...F,vertical:Boolean},setup(e,{slots:o}){const t=J(e),s=R(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>M("div",{class:s.value},W(o.default))}});function U(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const _=G({name:"close-popup",beforeMount(e,{value:o}){const t={depth:U(o),handler(s){t.depth!==0&&setTimeout(()=>{const i=H(e);i!==void 0&&X(i,s,t.depth)})},handlerKey(s){Y(s,13)===!0&&t.handler(s)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=U(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});function re(e){const o=Object.assign({noopener:!0},e),t=[];for(const s in o){const i=o[s];i===!0?t.push(s):(j(i)||typeof i=="string"&&i!=="")&&t.push(s+"="+i)}return t.join(",")}function K(e,o,t){let s=window.open;if(w.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const i=s(e,"_blank",re(t));if(i)return w.is.desktop&&i.focus(),i;o&&o()}const ue=(e,o,t)=>{if(w.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:e},Z,o):K(e,o,t)});return}return K(e,o,t)},Q=e=>(ae("data-v-67ea032c"),e=e(),se(),e),de={class:"q-pa-md"},pe={class:"row"},ce={class:"col col-6"},me={class:"col col-6"},ve=["href"],fe=["href"],he=Q(()=>d("div",{class:"text-h6"},"Добавление продукта",-1)),ge=Q(()=>d("div",{class:"text-h6"},"Удалить список?",-1)),_e=ee({__name:"ShoppingListView",setup(e){const{selectedShop1:o}=oe(),t=v(""),s=v(!1),i=v(!1),p=v(""),c=v(JSON.parse(localStorage.getItem("shoppingList")||"[]")||[]),D=v(["Яблоки","Груши","Йогурт греческий","Йогурт термостатный","Яйцо куриное СО","Хлеб зерновой"]);function C(m){var l;return o.value.value==="multisearch"?"https://kuper.ru/multisearch?q="+m.trim():(l=o.value.link)==null?void 0:l.replace("ingredient",m.trim())}function E(){return o.value.value==="multisearch"?"https://kuper.ru/multisearch?q="+t.value.trim():o.value.link.replace("ingredient",t.value.trim())}function V(){ue(E())}function L(){p.value=p.value.trim(),p.value.length>0&&(c.value.push(p.value),localStorage.setItem("shoppingList",JSON.stringify(c.value)))}function T(m){c.value=c.value.filter(l=>l!==m),localStorage.setItem("shoppingList",JSON.stringify(c.value))}function q(m){navigator.clipboard.writeText(m)}function O(){localStorage.setItem("shoppingList","[]"),c.value=[]}return(m,l)=>(f(),h(S,null,[d("div",de,[d("div",pe,[d("div",ce,[a($,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=n=>t.value=n),filled:"",type:"search",hint:"Поиск в магазине",onKeyup:x(V,["enter"])},{append:r(()=>[a(u,{color:"secondary","icon-right":"search",disable:t.value==="",onClick:V},null,8,["disable"])]),_:1},8,["modelValue"]),a(ne,{modelValue:te(o),"onUpdate:modelValue":l[1]||(l[1]=n=>le(o)?o.value=n:null)},null,8,["modelValue"])]),d("div",me,[(f(!0),h(S,null,I(D.value,(n,y)=>(f(),h("ul",{key:y,class:"q-pl-md q-ma-none"},[d("a",{href:C(n),target:"_blank"},P(n),9,ve),a(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:b=>q(n)},null,8,["onClick"])]))),128)),a(u,{icon:"mdi-plus",color:"primary",class:"q-ml-md q-my-md",onClick:l[2]||(l[2]=n=>s.value=!0)}),a(u,{icon:"mdi-delete",color:"negative",class:"q-ml-md q-my-md",onClick:l[3]||(l[3]=n=>i.value=!0)}),(f(!0),h(S,null,I(c.value,(n,y)=>(f(),h("ul",{key:y,class:"q-pl-md q-ma-none"},[d("a",{href:C(n),target:"_blank"},P(n),9,fe),a(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:b=>q(n)},null,8,["onClick"]),a(u,{flat:"",round:"",color:"orange-5",icon:"mdi-minus",size:"sm",class:"border-gray",onClick:b=>T(n)},null,8,["onClick"])]))),128))])])]),a(B,{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=n=>s.value=n),persistent:"",onBeforeShow:l[7]||(l[7]=n=>p.value="")},{default:r(()=>[a(A,{style:{"min-width":"350px"}},{default:r(()=>[a(k,null,{default:r(()=>[he]),_:1}),a(k,{class:"q-pt-none"},{default:r(()=>[a($,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=n=>p.value=n),dense:"",autofocus:"",onKeyup:l[5]||(l[5]=x(n=>{L(),s.value=!1},["enter"]))},null,8,["modelValue"])]),_:1}),a(N,{align:"right",class:"text-primary"},{default:r(()=>[g(a(u,{flat:"",label:"Отмена"},null,512),[[_]]),g(a(u,{color:"primary",label:"Добавить",onClick:L},null,512),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(B,{modelValue:i.value,"onUpdate:modelValue":l[8]||(l[8]=n=>i.value=n),persistent:""},{default:r(()=>[a(A,{style:{"min-width":"350px"}},{default:r(()=>[a(k,null,{default:r(()=>[ge]),_:1}),a(N,{align:"right",class:"text-primary"},{default:r(()=>[g(a(u,{flat:"",label:"Отмена"},null,512),[[_]]),g(a(u,{color:"negative",label:"Удалить",onClick:O},null,512),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ke=ie(_e,[["__scopeId","data-v-67ea032c"]]);export{ke as default};
