import{c as $,G as E,H as T,a as z,h as D,b as O,I as F,J,K as M,L as R,P as _,M as W,N as G,d as H,O as X,r as d,m as h,n as k,p,x as a,t as v,R as C,S as Y,U as Z,z as j,F as f,q as V,y as u,V as ee,B as L,W as q,X as te,Y as oe,k as re}from"./index-090be4e0.js";import{Q as x,b as se,a as I}from"./QCard-0d6d6bda.js";const ne=$({name:"QCardActions",props:{...E,vertical:Boolean},setup(e,{slots:t}){const o=T(e),r=z(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>D("div",{class:r.value},O(t.default))}});function B(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const P=F({name:"close-popup",beforeMount(e,{value:t}){const o={depth:B(t),handler(r){o.depth!==0&&setTimeout(()=>{const s=J(e);s!==void 0&&M(s,r,o.depth)})},handlerKey(r){R(r,13)===!0&&o.handler(r)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=B(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function le(e){const t=Object.assign({noopener:!0},e),o=[];for(const r in t){const s=t[r];s===!0?o.push(r):(G(s)||typeof s=="string"&&s!=="")&&o.push(r+"="+s)}return o.join(",")}function A(e,t,o){let r=window.open;if(_.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)r=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const s=r(e,"_blank",le(o));if(s)return _.is.desktop&&s.focus(),s;t&&t()}const ae=(e,t,o)=>{if(_.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(r=>{r?window.SafariViewController.show({url:e},W,t):A(e,t,o)});return}return A(e,t,o)},ie=e=>(te("data-v-1f3be53d"),e=e(),oe(),e),ue={class:"q-pa-md"},pe={class:"row"},ce={class:"col col-6"},de={class:"col col-6"},ve=["href"],he=["href"],ke=ie(()=>p("div",{class:"text-h6"},"Добавление продукта",-1)),me=H({__name:"ShoppingListView",setup(e){const{selectedShop1:t}=X(),o=d(""),r=d(!1),s=d(""),c=d(JSON.parse(localStorage.getItem("shoppingList")||"[]")||[]),N=d([{value:"vkusvill",label:"Вкусвилл",link:"https://vkusvill.ru/search/?type=products&q=ingredient"},{value:"vprok",label:"Впрок",link:"https://www.vprok.ru/catalog/search?text=ingredient"},{value:"lenta",label:"Лента",link:"https://moscow.online.lenta.com/search/ingredient"},{value:"multisearch",label:"Купер Все магазины",link:"https://kuper.ru/multisearch?q=ingredient"},{value:"auchan",label:"Купер Ашан",link:"https://kuper.ru/auchan/search?keywords=ingredient&sort=unit_price_asc"},{value:"lentagp",label:"Купер Лента",link:"https://kuper.ru/lentagp/search?keywords=ingredient&sort=unit_price_asc"},{value:"globusgiper",label:"Купер Глобус",link:"https://kuper.ru/globusgiper/search?keywords=ingredient&sort=unit_price_asc"},{value:"okey",label:"Купер Окей",link:"https://kuper.ru/okey/search?keywords=ingredient&sort=unit_price_asc"},{value:"perekrestok",label:"Купер Перекресток",link:"https://kuper.ru/perekrestok/search?keywords=ingredient&sort=unit_price_asc"},{value:"perekrestokvprok",label:"Купер Перекресток Впрок",link:"https://kuper.ru/perekrestokvprok/search?keywords=ingredient&sort=unit_price_asc"},{value:"metro",label:"Купер Metro",link:"https://kuper.ru/metro/search?keywords=ingredient&sort=unit_price_asc"},{value:"vkusvill_darkstore",label:"Купер Вкусвилл",link:"https://kuper.ru/vkusvill_darkstore/search?keywords=ingredient&sort=unit_price_asc"}]),Q=d(["Яблоки","Груши","Йогурт греческий","Йогурт термостатный","Яйцо куриное СО","Хлеб зерновой"]);function g(i){var n;return t.value.value==="multisearch"?"https://kuper.ru/multisearch?q="+i.trim():(n=t.value.link)==null?void 0:n.replace("ingredient",i.trim())}function K(){return t.value.value==="multisearch"?"https://kuper.ru/multisearch?q="+o.value.trim():t.value.link.replace("ingredient",o.value.trim())}function y(){ae(K())}function w(){s.value=s.value.trim(),s.value.length>0&&(c.value.push(s.value),localStorage.setItem("shoppingList",JSON.stringify(c.value)))}function U(i){c.value=c.value.filter(n=>n!==i),localStorage.setItem("shoppingList",JSON.stringify(c.value))}function b(i){navigator.clipboard.writeText(i)}return(i,n)=>(h(),k(f,null,[p("div",ue,[p("div",pe,[p("div",ce,[a(x,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=l=>o.value=l),filled:"",type:"search",hint:"Поиск в магазине",onKeyup:C(y,["enter"])},{append:v(()=>[a(u,{color:"secondary","icon-right":"search",disable:o.value==="",onClick:y},null,8,["disable"])]),_:1},8,["modelValue"]),a(j,{modelValue:Y(t),"onUpdate:modelValue":n[1]||(n[1]=l=>Z(t)?t.value=l:null),options:N.value,label:"Магазин",class:"q-select"},null,8,["modelValue","options"])]),p("div",de,[(h(!0),k(f,null,V(Q.value,(l,m)=>(h(),k("ul",{key:m,class:"q-pl-md"},[p("a",{href:g(l),target:"_blank"},L(l),9,ve),a(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:S=>b(l)},null,8,["onClick"])]))),128)),a(u,{icon:"mdi-plus",color:"primary",class:"q-ml-md",onClick:n[2]||(n[2]=l=>r.value=!0)}),(h(!0),k(f,null,V(c.value,(l,m)=>(h(),k("ul",{key:m,class:"q-pl-md"},[p("a",{href:g(l),target:"_blank"},L(l),9,he),a(u,{flat:"",round:"",color:"secondary",icon:"mdi-content-copy",size:"sm",title:"Скопировать",onClick:S=>b(l)},null,8,["onClick"]),a(u,{flat:"",round:"",color:"orange-5",icon:"mdi-minus",size:"sm",class:"border-gray",onClick:S=>U(l)},null,8,["onClick"])]))),128))])])]),a(ee,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=l=>r.value=l),persistent:"",onBeforeShow:n[6]||(n[6]=l=>s.value="")},{default:v(()=>[a(se,{style:{"min-width":"350px"}},{default:v(()=>[a(I,null,{default:v(()=>[ke]),_:1}),a(I,{class:"q-pt-none"},{default:v(()=>[a(x,{modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=l=>s.value=l),dense:"",autofocus:"",onKeyup:n[4]||(n[4]=C(l=>{w(),r.value=!1},["enter"]))},null,8,["modelValue"])]),_:1}),a(ne,{align:"right",class:"text-primary"},{default:v(()=>[q(a(u,{flat:"",label:"Отмена"},null,512),[[P]]),q(a(u,{color:"primary",label:"Добавить",onClick:w},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ge=re(me,[["__scopeId","data-v-1f3be53d"]]);export{ge as default};
